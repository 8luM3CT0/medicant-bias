//front-end
import Head from 'next/head'
import {
  Header,
  HomeInfo,
  HomeNews,
  AboutDiv,
  Button,
  Icon,
  Modal,
  ModalHeader,
  ModalBody,
  ModalFooter,
  Input
} from '../components'
//back-end
import { useState } from 'react'
import { sample_data } from '../data/sample_data'
import { news } from './api/news/news'

export default function Home ({ healthNews, testData }) {
  //console.log(testData?.['text-list'])
  console.log(healthNews?.results)

  return (
    <>
      <div
        className='
    h-screen 
    bg-mm-lakes
    bg-center
    bg-no-repeat
    bg-cover
    overflow-hidden'
      >
        <Head>
          <title>Medicant</title>
          <meta name='description' content='Generated by create next app' />
          <link rel='icon' href='/favicon.ico' />
        </Head>

        <header className='z-50 top-0 sticky'>
          <Header />
        </header>
        <main
          className='
      max-w-6xl 
      h-screen
      place-items-center
      space-y-4
      bg-neutral-200
      opacity-90 
      mx-auto
      py-3
      overflow-y-scroll
      scrollbar-hide
      pb-48
      '
        >
          <img
            src='https://i2.wp.com/www.ayoungdoctorsjourney.com//wp-content/uploads/2019/06/Screen-Shot-2019-06-07-at-6.47.44-PM-1024x766.png?resize=1024%2C766'
            alt=''
            className='
        md:col-span-full
        w-full
        max-w-6xl 
        rounded-xl 
        mx-auto
        max-h-[560px] 
        -mt-60
        opacity-100'
          />
          <div
            className='
            w-full
            max-w-6xl
            justify-evenly
            mx-auto 
            px-4 
            py-3 
            lg:flex 
            lg:items-center
            grid
            lg:space-y-0
            space-y-4
            '
          >
            {sample_data &&
              sample_data.map(doc => (
                <HomeInfo name={doc.name} description={doc.descripition} />
              ))}
            {healthNews?.results && <HomeNews news={healthNews?.results} />}
          </div>
          <div className='pb-56'>
            <AboutDiv />
          </div>
        </main>

        <footer className='z-50 bottom-0 sticky bg-gray-600 px-8 py-4 justify-between  flex items-center'>
          <Button
            color='lightBlue'
            buttonType='link'
            iconOnly={false}
            block={false}
            rounded={false}
            className='
          capitalize
          hover:underline 
          font-google-sans 
          font-normal'
          >
            <h1 className='text-xl '>Looking for services ? Click here.</h1>
          </Button>
          <Button
            color='lightBlue'
            buttonType='link'
            iconOnly={false}
            block={false}
            rounded={false}
            className='
            flex
            items-center
            space-x-4
          capitalize
          font-google-sans 
          font-normal'
          >
            <Icon name='terminal' />
            <h1 className='developerTitle'>Developer</h1>
          </Button>
        </footer>
      </div>
    </>
  )
}

export async function getServerSideProps () {
  const UsHealth = await fetch(
    'https://newsdata.io/api/1/news?apikey=pub_3948c45355202855c2e81dd9c6bf385d8045&country=us&category=health'
  ).then(res => res.json())

  const homeInfo = await fetch(
    'https://medlineplus.gov/download/genetics/condition/alzheimer-disease.json'
  ).then(res => res.json())

  return {
    props: {
      healthNews: UsHealth,
      testData: homeInfo
    }
  }
}
